<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>é‡åŒ–æ”¶ç›Šä¸“ä¸šçœ‹æ¿ Â· æ•°æ®é©±åŠ¨</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <style>
    body { margin:0; padding:20px; font-family:Segoe UI,Arial; background:#0f172a; color:#e5e7eb; }
    h1 { margin-bottom:8px; }
    .hint { font-size:12px; color:#94a3b8; margin-bottom:14px; }
    .container { display:flex; gap:20px; }
    .table-container { width:45%; max-height:620px; overflow:auto; border:1px solid #1e293b; }
    .chart-container { width:55%; }
    table { border-collapse:collapse; width:100%; font-size:13px; background:#020617; }
    th,td { border:1px solid #1e293b; padding:6px 8px; text-align:right; }
    th { position:sticky; top:0; background:#020617; text-align:center; }
    td:first-child,th:first-child { text-align:center; }
    tr:hover { background:#1e293b; cursor:pointer; }
    .chart { width:100%; height:620px; }
  </style>
</head>
<body>

<h1>ğŸ“ˆ é‡åŒ–æ”¶ç›Šä¸“ä¸šçœ‹æ¿ï¼ˆæ•°æ®é©±åŠ¨ï¼‰</h1>
<div class="hint">å”¯ä¸€æ•°æ®æº â†’ è‡ªåŠ¨ç”Ÿæˆè¡¨æ ¼ / å›¾è¡¨ / æŒ‡æ ‡ Â· æ¯å¤©åªéœ€æ–°å¢ä¸€è¡Œæ•°æ®</div>

<div class="container">
  <div class="table-container">
    <table id="dataTable">
      <thead>
        <tr>
          <th>æ—¥æœŸ</th><th>BNB</th><th>ETH</th><th>BTC</th><th>Bybit</th>
          <th>BNB%</th><th>ETH%</th><th>BTC%</th><th>Bybit%</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <div class="chart-container">
    <div id="chart" class="chart"></div>
  </div>
</div>

<script>
/**********************
 * â‘  å”¯ä¸€æ•°æ®æºï¼ˆé•¿æœŸç»´æŠ¤åªæ”¹è¿™é‡Œï¼‰
 **********************/
const rawData = [
  { date:'2025/12/12', bnb:4.94, eth:4.89335652, btc:0.06806163, bybit:0 },
  { date:'2025/12/15', bnb:4.96, eth:4.97927232, btc:0.06831465, bybit:0 },
  { date:'2025/12/17', bnb:5.05, eth:5.00693555, btc:0.06825674, bybit:1000 },
  { date:'2025/12/22', bnb:5.09, eth:5.06693069, btc:0.06853804, bybit:1796 },
  { date:'2025/12/25', bnb:5.09, eth:5.1412678,  btc:0.06909271, bybit:3171 },
  { date:'2025/12/27', bnb:5.09, eth:5.17173604, btc:0.06920976, bybit:3189 },
  { date:'2025/12/29', bnb:5.10, eth:5.17264088, btc:0.06920239, bybit:3195 },
  { date:'2025/12/30', bnb:5.11, eth:5.21396609, btc:0.06961127, bybit:3260 },
  { date:'2025/12/31', bnb:5.11, eth:5.22510837, btc:0.06968869, bybit:3271 },
  { date:'2026/1/6',  bnb:5.11, eth:5.1418926,  btc:0.06843291, bybit:3169 },
  { date:'2026/1/7',  bnb:5.12, eth:5.1409764,  btc:0.06957516, bybit:3137 },
  { date:'2026/1/8',  bnb:5.12, eth:5.24190189, btc:0.07076123, bybit:3353 },
  { date:'2026/1/9',  bnb:5.12, eth:5.26411513, btc:0.0712538,  bybit:3383 },
  { date:'2026/1/10', bnb:5.13, eth:5.29326015, btc:0.07185878, bybit:3448 }
];

/**********************
 * â‘¡ è‡ªåŠ¨è®¡ç®—æ”¶ç›Šç™¾åˆ†æ¯”
 **********************/
const base = rawData[0];
// BNB / ETH / BTC ä»¥ç¬¬ä¸€å¤©ä¸ºåŸºå‡†
const base = rawData[0];

// Bybit ä»¥ 2025/12/25 ä¸ºåŸºå‡†
const bybitBaseDate = '2025/12/25';
const bybitBase = rawData.find(d => d.date === bybitBaseDate);

rawData.forEach(d => {
  d.bnbP = ((d.bnb - base.bnb) / base.bnb * 100).toFixed(2);
  d.ethP = ((d.eth - base.eth) / base.eth * 100).toFixed(2);
  d.btcP = ((d.btc - base.btc) / base.btc * 100).toFixed(2);

  // Bybitï¼šåŸºå‡†æ—¥å‰ç»Ÿä¸€ä¸º 0
  if (!bybitBase || d.date < bybitBaseDate) {
    d.bybitP = '0.00';
  } else {
    d.bybitP = ((d.bybit - bybitBase.bybit) / bybitBase.bybit * 100).toFixed(2);
  }
});

/**********************
 * â‘¢ æ¸²æŸ“è¡¨æ ¼
 **********************/
const tbody = document.querySelector('#dataTable tbody');
rawData.forEach(d => {
  const tr = document.createElement('tr');
  tr.innerHTML = `
    <td>${d.date}</td>
    <td>${d.bnb}</td><td>${d.eth}</td><td>${d.btc}</td><td>${d.bybit}</td>
    <td>${d.bnbP}%</td><td>${d.ethP}%</td><td>${d.btcP}%</td><td>${d.bybitP}%</td>`;
  tbody.appendChild(tr);
});

/**********************
 * â‘£ å›¾è¡¨æ•°æ®
 **********************/
const dates = rawData.map(d => d.date);
const BNB = rawData.map(d => +d.bnbP);
const ETH = rawData.map(d => +d.ethP);
const BTC = rawData.map(d => +d.btcP);
const Bybit = rawData.map(d => +d.bybitP);
const Total = rawData.map((_,i)=>((BNB[i]+ETH[i]+BTC[i]+Bybit[i])/4).toFixed(2));

const chart = echarts.init(document.getElementById('chart'));
chart.setOption({
  backgroundColor:'#020617',
  tooltip:{ trigger:'axis', valueFormatter:v=>v+'%' },
  legend:{ textStyle:{color:'#e5e7eb'} },
  xAxis:{ type:'category', data:dates, axisLine:{lineStyle:{color:'#475569'}} },
  yAxis:[
    { type:'value', axisLabel:{formatter:'{value}%'}, axisLine:{lineStyle:{color:'#475569'}} },
    { type:'value', axisLabel:{formatter:'{value}%'}, axisLine:{lineStyle:{color:'#475569'}} }
  ],
  series:[
    { name:'BNB%', type:'line', smooth:true, data:BNB },
    { name:'ETH%', type:'line', smooth:true, data:ETH },
    { name:'BTC%', type:'line', smooth:true, data:BTC },
    { name:'Bybit%', type:'line', smooth:true, yAxisIndex:1, data:Bybit },
    { name:'æ€»æ”¶ç›Š%', type:'line', smooth:true, lineStyle:{type:'dashed'}, data:Total }
  ]
});

/**********************
 * â‘¤ è¡¨æ ¼ â†” å›¾è¡¨è”åŠ¨
 **********************/
[...tbody.children].forEach((tr,i)=>{
  tr.onclick=()=>chart.dispatchAction({ type:'showTip', seriesIndex:0, dataIndex:i });
});
</script>
</body>
</html>
